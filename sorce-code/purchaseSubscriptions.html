<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Elite Nights Credits</title>
    <link rel="stylesheet" href="style1.css">
</head>
<body>
<header>
    <img src="logo.png" alt="Marriott Bonvoy">
    <nav>
        <a href="#">Marriott.com</a>
        <a href="#">Sign Out</a>
    </nav>
</header>

<main>
    <section class="banner">
        <img src="tropical-resort.png" alt="Tropical Resort">
        <div class="banner-text">
            <h1>Enroll to our Traveler Subscriptions</h1>
            <h4>Embark on Personalized Travel Subscriptions - Unlock Your Adventure!</h4>
        </div>
    </section>

    <section class="content">
        <h2>When wanderlust sparks, make sure you have the Tailored Traveler Subscriptions to transform your inspirations into experiences.</h2>
        <p>Tailored Traveler Subscriptions offer personalized experiences curated to fit your unique wanderlust. From exclusive destination insights to handpicked travel gear, embark on adventures that match your individual style and preferences.</p>
        <br>
        <br>
        <div class="subscriptions">
            <p><img src="membershipSubscriptions.png" alt="Membership Subscription"></p>
            <p><img src="topUpSubscriptions.png" alt="Top-Up Subscription"></p>
        </div>
        <div class="purchase-form">

            <div class="greeting">
                <h2>Hi Amar Narayan Pasuperti! Which membership would you like to buy today? </h2>
            </div>
            <div class="container">
                <div class="selection-area">
                    <label for="subscription-selection">I WANT TO BUY MONTHLY PLAN</label>
                    <select id="subscription-selection" onchange="updatePurchaseInfo()">
                        <option>Select Membership for $300</option>
                        <option>Premium Membership for $600</option>
                        <option>Luxury Membership for $900</option>
                        <option>Ultra Luxury for $1200</option>
                    </select>
                    <div class="payment-information" id="payment-info">
                        <h2>Payment Information</h2>
                        <p>Please enter your information exactly as it appears on your credit card.</p>

                        <form id="payment-form">
                            <label for="card-type">CARD TYPE *</label>
                            <select id="card-type">
                                <option>Select Credit Card Type</option>
                                <option>Visa</option>
                                <option>MasterCard</option>
                                <option>American Express</option>
                            </select>

                            <div class="flex-inputs">
                                <div class="input-group">
                                    <label for="card-number">CARD NUMBER *</label>
                                    <input type="text" id="card-number" placeholder="Card Number">
                                </div>
                                <div class="input-group">
                                    <label for="security-code">SECURITY CODE *</label>
                                    <input type="text" id="security-code" placeholder="Security Code">
                                </div>
                            </div>

                            <label for="card-expiry-month">CARD EXPIRY *</label>
                            <div class="flex-inputs">
                                <select id="card-expiry-month" required>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <!-- Add remaining months -->
                                </select>
                                <select id="card-expiry-year" required>
                                    <option>Year</option>
                                    <option>2024</option>
                                    <option>2025</option>
                                    <!-- Add remaining years -->
                                </select>
                            </div>

                            <label for="name-on-card">NAME ON CARD *</label>
                            <input type="text" id="name-on-card" placeholder="Name as it appears on card">

                            <label for="address-line1">ADDRESS LINE 1 *</label>
                            <input type="text" id="address-line1" placeholder="Address Line 1">

                            <label for="address-line2">ADDRESS LINE 2</label>
                            <input type="text" id="address-line2" placeholder="Address Line 2">

                            <label for="city">CITY *</label>
                            <input type="text" id="city" placeholder="City">

                            <label for="country">COUNTRY / REGION *</label>
                            <select id="country">
                                <option>United States of America</option>
                                <!-- Add other countries -->
                            </select>

                            <label for="state">STATE / PROVINCE *</label>
                            <select id="state">
                                <option>Select State / Province</option>
                                <option>New York</option>
                                <option>California</option>
                                <!-- Add other states -->
                            </select>

                            <label for="zip">ZIP CODE *</label>
                            <input type="text" id="zip" placeholder="Zip Code">

                            <label for="phone">BILLING PHONE (WITH AREA CODE) *</label>
                            <input type="text" id="phone" placeholder="Phone Number">

                            <label for="email">EMAIL ADDRESS FOR RECEIPT *</label>
                            <input type="email" id="email" placeholder="Email Address">
                            <button onclick="submitForm()">PAY NOW</button>
                        </form>
                    </div>
                </div>
                <div class="balance-info">
                    <label for="topUp-selection">I WANT TO BUY TOP-UP MONTHLY PLAN</label>
                    <select id="topUp-selection" onchange="updatePurchaseInfo()">
                        <option>Culinary Delight for $200</option>
                        <option>Gourmet for $450</option>
                        <option>Spa & Wellness for $800</option>
                        <option>Beverage Connoisseur for $1000</option>
                    </select>
                    <div class="purchase-info" id="purchase-info">
                        <h2>Purchase Information</h2>
                        <p>Subscription: 1</p>
                        <p>Cost of Subscription: </p>
                        <p>Total Charge: USD 00.00</p>
                        <p><label><input type="checkbox"> I have read the terms and conditions. Transactions are
                            non-refundable.</label></p>
                    </div>
                </div>
            </div>

            <!-- Modal HTML -->
            <div id="payment-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <p>Payment Successful! Redirecting...</p>
                </div>
            </div>
        </div>
    </section>
</main>

<footer>
    <section class="banner">
        <img src="footer_banner.png" alt="Footer Banner">
    </section>
    <p>Â© 1996 - 2022 Marriott International, Inc. All rights reserved. Company Proprietary Information</p>
</footer>
<script>

    function updatePurchaseInfo() {

        const select = document.getElementById('subscription-selection');
        const purchaseInfo = document.getElementById('purchase-info');
        const selectedOption = select.options[select.selectedIndex].text.split(' for ');
        const paymentInfo = document.getElementById('payment-info');

        const topUp = document.getElementById('topUp-selection');
        const selectedTopUp = topUp.options[topUp.selectedIndex].text.split(' for ');

        const subscriptionCost = parseFloat(selectedOption[1].replace(/\D/g, '')); // Parse subscription cost as a float
        const topUpCost = parseFloat(selectedTopUp[1].replace(/\D/g, '')); // Parse top-up cost as a float

        // Calculate total charge by adding subscription cost and top-up cost
        const totalCharge = subscriptionCost + topUpCost;

console.log("Parsed Subscription Cost:", subscriptionCost);
console.log("Parsed Top-Up Cost:", topUpCost);
purchaseInfo.querySelector('p:nth-of-type(1)').textContent = `Selected Subscription: ${selectedOption[0]} ${selectedTopUp[0]}`;
purchaseInfo.querySelector('p:nth-of-type(2)').textContent = `Cost of subscription: ${selectedOption[1]}+ ${selectedTopUp[1]}`;
purchaseInfo.querySelector('p:nth-of-type(3)').textContent = `Total Charge: $${totalCharge}`;
        if (select.value) {  // Checks if any option other than the default is selected
                console.log("Showing info"); // Debugging line
                purchaseInfo.style.display = 'block';
                paymentInfo.style.display = 'block';
            } else {
                console.log("Hiding info"); // Debugging line
                purchaseInfo.style.display = 'none';
                paymentInfo.style.display = 'none';
            }
    }
function submitForm(){
    const monthSelect = document.getElementById('card-expiry-month');
    const yearSelect = document.getElementById('card-expiry-year');
    const currentYear = new Date().getFullYear();
    const currentMonth = new Date().getMonth() + 1; // getMonth is zero-indexed, so +1 makes it 1-indexed

    const selectedMonth = parseInt(monthSelect.value, 10);
    const selectedYear = parseInt(yearSelect.value, 10);
    event.preventDefault(); // Prevent the form from submitting normally
    var isValid = true;
    var messages = [];

    // Example of adding manual checks for specific inputs for demonstration:
    var cardNumber = document.getElementById('card-number');
    if (!cardNumber.value.match(/^\d{13,16}$/)) {
        isValid = false;
        messages.push('Card number must be between 13 and 16 digits.');
    }

    var securityCode = document.getElementById('security-code');
    if (!securityCode.value.match(/^\d{3,4}$/)) {
        isValid = false;
        messages.push('Security code must be 3 or 4 digits.');
    }
    if (!selectedMonth || !selectedYear) {
        isValid = false;
        messages.push('Please select both a month and a year for the card expiration.');
    } else if (selectedYear < currentYear || (selectedYear === currentYear && selectedMonth < currentMonth)) {
        // Check if the selected date is in the past
        isValid = false;
        messages.push('The expiration date cannot be in the past.');
    }

    var email = document.getElementById('email');
    if (!email.value.match(/^[^@]+@[^@]+\.[^@]+$/)) {
        isValid = false;
        messages.push('Please enter a valid email address.');
    }

    // Check for any field that is required and empty
    var requiredFields = document.querySelectorAll('#payment-form [required]');
    requiredFields.forEach(function(field) {
        if (!field.value.trim()) {
            isValid = false;
            messages.push(field.placeholder + ' is required.');
        }
    });

    if (isValid) {
        alert('Form is valid, submitting...');
        displayModal();
    } else {
        // If not valid, show an error message
        alert('Please correct the following errors:\n' + messages.join('\n'));
   }
}

function displayModal() {
    var modal = document.getElementById("payment-modal");
    var span = document.getElementsByClassName("close")[0];

    modal.style.display = "block"; // Show the modal

    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    // Redirect after 3 seconds
    setTimeout(function() {
        window.location.href = 'membershipDetailsPage1.html'; // Specify your redirect URL here
    }, 3000);
}
</script>

</body>
</html>
