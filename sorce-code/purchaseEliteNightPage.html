<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Elite Nights Credits</title>
    <link rel="stylesheet" href="style1.css">
</head>
<body>
<header>
    <img src="logo.png" alt="Marriott Bonvoy">
    <nav>
        <a href="#">Marriott.com</a>
        <a href="#">Sign Out</a>
    </nav>
</header>

<main>
    <section class="banner">
        <img src="tropical-resort.png" alt="Tropical Resort">
        <div class="banner-text">
            <h1>Buy Elite Nights Credits</h1>
            <h4>Lock in Elite Night Credits Today, Keep Enjoying Your Benefits</h4>
        </div>
    </section>

    <section class="content">
        <h2>When inspiration strikes, ensure you have the Elite Night Credits to make it a reality.</h2>
        <p>Fulfilling travel means embracing flexibility for unexpected adventures. It's about creating opportunities
            for discovery and exploration, replacing strict schedules with spontaneous moments. Secure your Elite Night
            Credits today and ensure you can enjoy your elite benefits and wander freely all year long.</p>

        <div class="purchase-form">
            <div class="greeting">
                <h2>Hi Amar Narayan Pasuperti! How many Elite nights credits</h2>
                <h2> would you like to buy today?</h2>
            </div>
            <div class="container">
                <div class="selection-area">
                    <label for="elite-night-selection">I WANT TO BUY</label>
                    <select id="elite-night-selection" onchange="updatePurchaseInfo()"></select>
                    <div class="payment-information" id="payment-info">
                        <h2>Payment Information</h2>
                        <p>Please enter your information exactly as it appears on your credit card.</p>

                        <form id="payment-form">
                            <label for="card-type">CARD TYPE *</label>
                            <select id="card-type">
                                <option>Select Credit Card Type</option>
                                <option>Visa</option>
                                <option>MasterCard</option>
                                <option>American Express</option>
                            </select>

                            <div class="flex-inputs">
                                <div class="input-group">
                                    <label for="card-number">CARD NUMBER *</label>
                                    <input type="text" id="card-number" placeholder="Card Number">
                                </div>
                                <div class="input-group">
                                    <label for="security-code">SECURITY CODE *</label>
                                    <input type="text" id="security-code" placeholder="Security Code">
                                </div>
                            </div>

                            <label for="card-expiry-month">CARD EXPIRY *</label>
                            <div class="flex-inputs">
                                <select id="card-expiry-month" required>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <!-- Add remaining months -->
                                </select>
                                <select id="card-expiry-year" required>
                                    <option>Year</option>
                                    <option>2024</option>
                                    <option>2025</option>
                                    <!-- Add remaining years -->
                                </select>
                            </div>

                            <label for="name-on-card">NAME ON CARD *</label>
                            <input type="text" id="name-on-card" placeholder="Name as it appears on card">

                            <label for="address-line1">ADDRESS LINE 1 *</label>
                            <input type="text" id="address-line1" placeholder="Address Line 1">

                            <label for="address-line2">ADDRESS LINE 2</label>
                            <input type="text" id="address-line2" placeholder="Address Line 2">

                            <label for="city">CITY *</label>
                            <input type="text" id="city" placeholder="City">

                            <label for="country">COUNTRY / REGION *</label>
                            <select id="country">
                                <option>United States of America</option>
                                <!-- Add other countries -->
                            </select>

                            <label for="state">STATE / PROVINCE *</label>
                            <select id="state">
                                <option>Select State / Province</option>
                                <option>New York</option>
                                <option>California</option>
                                <!-- Add other states -->
                            </select>

                            <label for="zip">ZIP CODE *</label>
                            <input type="text" id="zip" placeholder="Zip Code">

                            <label for="phone">BILLING PHONE (WITH AREA CODE) *</label>
                            <input type="text" id="phone" placeholder="Phone Number">

                            <label for="email">EMAIL ADDRESS FOR RECEIPT *</label>
                            <input type="email" id="email" placeholder="Email Address">
                            <button onclick="submitForm()">PAY NOW</button>
                        </form>
                    </div>
                </div>
                <div class="balance-info">
                    <p>Current Elite Nights balance: 18</p>
                    <p>Need 7 more elite credits to enjoy Gold benefits</p>
                    <div class="purchase-info" id="purchase-info">
                        <h2>Purchase Information</h2>
                        <p>Number of Elite Nights: 1</p>
                        <p>Cost of Elite nights: USD 60.00</p>
                        <p>Total Charge: USD 60.00</p>
                        <p><label><input type="checkbox"> I have read the terms and conditions. Transactions are
                            non-refundable.</label></p>
                    </div>
                </div>
            </div>

            <!-- Modal HTML -->
            <div id="payment-modal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <p>Payment Successful! Redirecting...</p>
                </div>
            </div>
        </div>
    </section>
</main>

<footer>
    <section class="banner">
        <img src="footer_banner.png" alt="Footer Banner">
    </section>
    <p>Â© 1996 - 2022 Marriott International, Inc. All rights reserved. Company Proprietary Information</p>
</footer>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const select = document.getElementById('elite-night-selection');
        let basePrice = 60; // Starting price for the first night
        const increment = 55; // Incremental price for each additional night

        for (let i = 1; i <= 30; i++) {
            const price = basePrice + (i - 1) * increment;
            const option = document.createElement('option');
            option.value = i;
            option.text = `${i} Elite Night Credit${i > 1 ? 's' : ''} for $${price}`;
            select.appendChild(option);
        }
    });

    function updatePurchaseInfo() {

        const select = document.getElementById('elite-night-selection');
        const purchaseInfo = document.getElementById('purchase-info');
        const selectedOption = select.options[select.selectedIndex].text.split(' for ');
        const numberOfCredits = select.options[select.selectedIndex].text.match(/^\d+/)[0];
        const paymentInfo = document.getElementById('payment-info');
        purchaseInfo.querySelector('p:nth-of-type(1)').textContent = `Number of Elite Night Credits: ${numberOfCredits}`;
        purchaseInfo.querySelector('p:nth-of-type(2)').textContent = `Cost of Elite Night Credits: ${selectedOption[1]}`;
        purchaseInfo.querySelector('p:nth-of-type(3)').textContent = `Total Charge: ${selectedOption[1]}`;
        if (select.value) {  // Checks if any option other than the default is selected
                console.log("Showing info"); // Debugging line
                purchaseInfo.style.display = 'block';
                paymentInfo.style.display = 'block';
            } else {
                console.log("Hiding info"); // Debugging line
                purchaseInfo.style.display = 'none';
                paymentInfo.style.display = 'none';
            }
    }
function submitForm(){
    const monthSelect = document.getElementById('card-expiry-month');
    const yearSelect = document.getElementById('card-expiry-year');
    const currentYear = new Date().getFullYear();
    const currentMonth = new Date().getMonth() + 1; // getMonth is zero-indexed, so +1 makes it 1-indexed

    const selectedMonth = parseInt(monthSelect.value, 10);
    const selectedYear = parseInt(yearSelect.value, 10);
    event.preventDefault(); // Prevent the form from submitting normally
    var isValid = true;
    var messages = [];

    // Example of adding manual checks for specific inputs for demonstration:
    var cardNumber = document.getElementById('card-number');
    if (!cardNumber.value.match(/^\d{13,16}$/)) {
        isValid = false;
        messages.push('Card number must be between 13 and 16 digits.');
    }

    var securityCode = document.getElementById('security-code');
    if (!securityCode.value.match(/^\d{3,4}$/)) {
        isValid = false;
        messages.push('Security code must be 3 or 4 digits.');
    }
    if (!selectedMonth || !selectedYear) {
        isValid = false;
        messages.push('Please select both a month and a year for the card expiration.');
    } else if (selectedYear < currentYear || (selectedYear === currentYear && selectedMonth < currentMonth)) {
        // Check if the selected date is in the past
        isValid = false;
        messages.push('The expiration date cannot be in the past.');
    }

    var email = document.getElementById('email');
    if (!email.value.match(/^[^@]+@[^@]+\.[^@]+$/)) {
        isValid = false;
        messages.push('Please enter a valid email address.');
    }

    // Check for any field that is required and empty
    var requiredFields = document.querySelectorAll('#payment-form [required]');
    requiredFields.forEach(function(field) {
        if (!field.value.trim()) {
            isValid = false;
            messages.push(field.placeholder + ' is required.');
        }
    });

    if (isValid) {
        alert('Form is valid, submitting...');
        displayModal();
    } else {
        // If not valid, show an error message
        alert('Please correct the following errors:\n' + messages.join('\n'));
   }
}

function displayModal() {
    var modal = document.getElementById("payment-modal");
    var span = document.getElementsByClassName("close")[0];

    modal.style.display = "block"; // Show the modal

    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

    // Redirect after 3 seconds
    setTimeout(function() {
        window.location.href = 'membershipDetailsPage1.html'; // Specify your redirect URL here
    }, 3000);
}
</script>

</body>
</html>
